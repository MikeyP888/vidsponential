<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Vidsponential</title>
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ“Š</text></svg>">

    <link rel="stylesheet" href="../shared/styles/theme.css">
    <link rel="stylesheet" href="../shared/styles/base.css">
    <link rel="stylesheet" href="../shared/styles/fonts.css">
    <link rel="stylesheet" href="../shared/styles/layout.css">
    <link rel="stylesheet" href="../shared/styles/buttons.css">
    <link rel="stylesheet" href="../shared/styles/sidebar.css">

    <style>
        body {
            background: #f8f9fa;
            font-family: "Inter", sans-serif;
        }

        .dashboard-container {
            padding: 24px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .dashboard-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 20px;
        }

        .dashboard-logo {
            height: 40px;
            width: auto;
        }

        .dashboard-title {
            font-size: 24px;
            font-weight: 700;
            color: #2c3e50;
            margin: 0;
        }

        /* Date Controls */
        .date-controls {
            background: white;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 16px;
        }

        .period-selector {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .period-btn {
            padding: 8px 16px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-family: "Inter", sans-serif;
            font-size: 13px;
            font-weight: 500;
            color: #666;
            transition: all 0.2s ease;
        }

        .period-btn:hover {
            border-color: #3498db;
            color: #3498db;
        }

        .period-btn.active {
            background: linear-gradient(to right, rgba(11, 230, 255, 1) 0%, rgba(175, 11, 255, 1) 100%);
            border-color: transparent;
            color: white;
        }

        .navigation-arrows {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .nav-arrow {
            width: 32px;
            height: 32px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .nav-arrow:hover {
            border-color: #3498db;
            background: #f0f8ff;
        }

        .nav-arrow svg {
            width: 16px;
            height: 16px;
            stroke: #666;
        }

        .current-period {
            font-size: 14px;
            font-weight: 600;
            color: #2c3e50;
            min-width: 180px;
            text-align: center;
        }

        /* Main Stats */
        .main-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            transition: transform 0.2s ease;
        }

        .stat-card:hover {
            transform: translateY(-4px);
        }

        .stat-card.scripts {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .stat-card.revenue {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .stat-label {
            font-size: 13px;
            font-weight: 500;
            opacity: 0.9;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .stat-value {
            font-size: 40px;
            font-weight: 700;
            margin-bottom: 12px;
            line-height: 1;
        }

        .stat-comparison {
            font-size: 12px;
            opacity: 0.85;
            padding-top: 12px;
            border-top: 1px solid rgba(255,255,255,0.2);
        }

        /* Hours Worked Section */
        .hours-section {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            margin-bottom: 20px;
        }

        .hours-title {
            font-size: 18px;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 2px solid #e0e0e0;
        }

        .hours-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
        }

        .hours-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 16px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.2s ease;
        }

        .hours-card:hover {
            border-color: #3498db;
            background: #f0f8ff;
        }

        .hours-category {
            font-size: 11px;
            font-weight: 600;
            color: #666;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .hours-value {
            font-size: 32px;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 4px;
        }

        .hours-label {
            font-size: 12px;
            color: #888;
        }

        .total-hours {
            margin-top: 16px;
            padding-top: 16px;
            border-top: 2px solid #e0e0e0;
            text-align: center;
        }

        .total-hours-label {
            font-size: 13px;
            font-weight: 600;
            color: #666;
            margin-bottom: 6px;
        }

        .total-hours-value {
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(to right, rgba(11, 230, 255, 1) 0%, rgba(175, 11, 255, 1) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Section Titles */
        .section-title-header {
            font-size: 20px;
            font-weight: 700;
            color: #2c3e50;
            margin: 24px 0 16px 0;
            padding-left: 12px;
            border-left: 4px solid;
            border-image: linear-gradient(to bottom, rgba(11, 230, 255, 1) 0%, rgba(175, 11, 255, 1) 100%) 1;
        }

        /* Period Stats Grid */
        .period-stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 20px;
        }

        .mini-stat-card {
            background: white;
            border-radius: 8px;
            padding: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            border: 1px solid #e0e0e0;
            transition: all 0.2s ease;
        }

        .mini-stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .mini-stat-label {
            font-size: 12px;
            font-weight: 600;
            color: #666;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .mini-stat-value {
            font-size: 28px;
            font-weight: 700;
            color: #2c3e50;
        }

        .mini-stat-breakdown {
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid #e0e0e0;
            font-size: 11px;
            color: #888;
        }

        .platform-tag {
            display: inline-block;
            background: #f0f8ff;
            color: #3498db;
            padding: 2px 8px;
            border-radius: 4px;
            margin: 2px;
            font-weight: 500;
        }

        /* Total Stats Grid */
        .total-stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin-bottom: 20px;
        }

        .total-stat-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            border: 2px solid #e0e0e0;
            transition: all 0.2s ease;
        }

        .total-stat-card:hover {
            border-color: #3498db;
        }

        .total-stat-label {
            font-size: 13px;
            font-weight: 600;
            color: #666;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .total-stat-value {
            font-size: 36px;
            font-weight: 700;
            background: linear-gradient(to right, rgba(11, 230, 255, 1) 0%, rgba(175, 11, 255, 1) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        @media (max-width: 1024px) {
            .main-stats {
                grid-template-columns: 1fr;
            }

            .hours-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .dashboard-container {
                padding: 20px;
            }

            .date-controls {
                flex-direction: column;
                align-items: stretch;
            }

            .period-selector {
                flex-wrap: wrap;
            }

            .stat-value {
                font-size: 42px;
            }

            .hours-value {
                font-size: 36px;
            }
        }
    </style>
</head>
<body class="has-sidebar">
    <div id="sidebarContainer"></div>

    <main class="dashboard-container with-sidebar">
        <div class="dashboard-header">
            <img src="../shared/assets/vidsponential logo.png" alt="Vidsponential" class="dashboard-logo">
            <h1 class="dashboard-title">Business Dashboard</h1>
        </div>

        <!-- Date Controls -->
        <div class="date-controls">
            <div class="period-selector">
                <button class="period-btn" data-period="today">Today</button>
                <button class="period-btn active" data-period="week">This Week</button>
                <button class="period-btn" data-period="month">This Month</button>
                <button class="period-btn" data-period="quarter">This Quarter</button>
                <button class="period-btn" data-period="year">This Year</button>
            </div>

            <div class="navigation-arrows">
                <button class="nav-arrow" id="prevPeriod">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="15,18 9,12 15,6"></polyline>
                    </svg>
                </button>
                <div class="current-period" id="currentPeriod">Week of Oct 7 - Oct 13</div>
                <button class="nav-arrow" id="nextPeriod">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="9,18 15,12 9,6"></polyline>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Main Stats -->
        <div class="main-stats">
            <div class="stat-card scripts">
                <div class="stat-label">Scripts Completed</div>
                <div class="stat-value" id="scriptsValue">12</div>
                <div class="stat-comparison" id="scriptsComparison">Last week: 8 scripts</div>
            </div>

            <div class="stat-card revenue">
                <div class="stat-label">Revenue Received</div>
                <div class="stat-value" id="revenueValue">$4,320</div>
                <div class="stat-comparison" id="revenueComparison">Last week: $2,850</div>
            </div>
        </div>

        <!-- Hours Worked -->
        <div class="hours-section">
            <h2 class="hours-title">Hours Worked</h2>
            <div class="hours-grid">
                <div class="hours-card">
                    <div class="hours-category">Getting & Doing Jobs</div>
                    <div class="hours-value" id="hoursJobs">24.5</div>
                    <div class="hours-label">hours</div>
                </div>

                <div class="hours-card">
                    <div class="hours-category">Automating</div>
                    <div class="hours-value" id="hoursAutomating">12.0</div>
                    <div class="hours-label">hours</div>
                </div>

                <div class="hours-card">
                    <div class="hours-category">Misc Work</div>
                    <div class="hours-value" id="hoursMisc">6.5</div>
                    <div class="hours-label">hours</div>
                </div>
            </div>

            <div class="total-hours">
                <div class="total-hours-label">TOTAL HOURS</div>
                <div class="total-hours-value" id="totalHours">43.0</div>
            </div>
        </div>

        <!-- Financials Section -->
        <h2 class="section-title-header" id="financialsTitle">Financials - This Week</h2>
        <div class="period-stats-grid">
            <div class="mini-stat-card">
                <div class="mini-stat-label">Revenue</div>
                <div class="mini-stat-value" id="financialRevenue">$4,320</div>
            </div>

            <div class="mini-stat-card">
                <div class="mini-stat-label">Costs</div>
                <div class="mini-stat-value" id="financialCosts">$1,240</div>
            </div>

            <div class="mini-stat-card">
                <div class="mini-stat-label">Profit</div>
                <div class="mini-stat-value" id="financialProfit">$3,080</div>
            </div>

            <div class="mini-stat-card">
                <div class="mini-stat-label">New Clients</div>
                <div class="mini-stat-value" id="newClients">3</div>
            </div>
        </div>

        <!-- Marketing Section -->
        <h2 class="section-title-header" id="marketingTitle">Marketing - This Week</h2>
        <div class="period-stats-grid">
            <div class="mini-stat-card">
                <div class="mini-stat-label">Social Posts</div>
                <div class="mini-stat-value" id="socialPosts">24</div>
                <div class="mini-stat-breakdown">
                    <span class="platform-tag">Twitter: 8</span>
                    <span class="platform-tag">LinkedIn: 7</span>
                    <span class="platform-tag">Instagram: 5</span>
                    <span class="platform-tag">Facebook: 4</span>
                </div>
            </div>

            <div class="mini-stat-card">
                <div class="mini-stat-label">Articles Published</div>
                <div class="mini-stat-value" id="articlesPublished">5</div>
            </div>

            <div class="mini-stat-card">
                <div class="mini-stat-label">Press Releases</div>
                <div class="mini-stat-value" id="pressReleases">2</div>
            </div>
        </div>

        <!-- Total Stats -->
        <h2 class="section-title-header">In Total</h2>
        <div class="total-stats-grid">
            <div class="total-stat-card">
                <div class="total-stat-label">Active Clients</div>
                <div class="total-stat-value" id="activeClients">47</div>
            </div>

            <div class="total-stat-card">
                <div class="total-stat-label">Coming Soon</div>
                <div class="total-stat-value">--</div>
            </div>

            <div class="total-stat-card">
                <div class="total-stat-label">Coming Soon</div>
                <div class="total-stat-value">--</div>
            </div>
        </div>
    </main>

    <script src="../shared/js/theme-manager.js"></script>
    <script type="module" src="../shared/js/sidebar-component.js"></script>
    <script>
        // Dashboard State
        let currentPeriodType = 'week';
        let currentOffset = 0; // 0 = current period, -1 = previous, 1 = next

        // Period definitions
        const periods = {
            today: { label: 'Today', comparison: 'Yesterday' },
            week: { label: 'Week', comparison: 'Last week' },
            month: { label: 'Month', comparison: 'Last month' },
            quarter: { label: 'Quarter', comparison: 'Last quarter' },
            year: { label: 'Year', comparison: 'Last year' }
        };

        // Get date range for current period
        function getDateRange(periodType, offset = 0) {
            const now = new Date();
            let start, end;

            switch(periodType) {
                case 'today':
                    start = new Date(now);
                    start.setDate(start.getDate() + offset);
                    start.setHours(0, 0, 0, 0);
                    end = new Date(start);
                    end.setHours(23, 59, 59, 999);
                    break;

                case 'week':
                    // Get Monday of the current week (or offset week)
                    start = new Date(now);
                    const dayOfWeek = start.getDay();
                    const daysToMonday = dayOfWeek === 0 ? -6 : 1 - dayOfWeek;
                    start.setDate(start.getDate() + daysToMonday + (offset * 7));
                    start.setHours(0, 0, 0, 0);
                    end = new Date(start);
                    end.setDate(end.getDate() + 6);
                    end.setHours(23, 59, 59, 999);
                    break;

                case 'month':
                    start = new Date(now.getFullYear(), now.getMonth() + offset, 1);
                    start.setHours(0, 0, 0, 0);
                    end = new Date(now.getFullYear(), now.getMonth() + offset + 1, 0);
                    end.setHours(23, 59, 59, 999);
                    break;

                case 'quarter':
                    const quarterMonth = Math.floor(now.getMonth() / 3) * 3;
                    start = new Date(now.getFullYear(), quarterMonth + (offset * 3), 1);
                    start.setHours(0, 0, 0, 0);
                    end = new Date(now.getFullYear(), quarterMonth + (offset * 3) + 3, 0);
                    end.setHours(23, 59, 59, 999);
                    break;

                case 'year':
                    start = new Date(now.getFullYear() + offset, 0, 1);
                    start.setHours(0, 0, 0, 0);
                    end = new Date(now.getFullYear() + offset, 11, 31);
                    end.setHours(23, 59, 59, 999);
                    break;
            }

            return { start, end };
        }

        // Format date range for display
        function formatDateRange(periodType, offset = 0) {
            const { start, end } = getDateRange(periodType, offset);
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];

            switch(periodType) {
                case 'today':
                    if (offset === 0) return 'Today';
                    if (offset === -1) return 'Yesterday';
                    return `${months[start.getMonth()]} ${start.getDate()}, ${start.getFullYear()}`;

                case 'week':
                    if (offset === 0) {
                        return `Week of ${months[start.getMonth()]} ${start.getDate()} - ${months[end.getMonth()]} ${end.getDate()}`;
                    }
                    return `Week of ${months[start.getMonth()]} ${start.getDate()} - ${months[end.getMonth()]} ${end.getDate()}, ${start.getFullYear()}`;

                case 'month':
                    if (offset === 0) return `${months[start.getMonth()]} ${start.getFullYear()}`;
                    return `${months[start.getMonth()]} ${start.getFullYear()}`;

                case 'quarter':
                    const quarter = Math.floor(start.getMonth() / 3) + 1;
                    if (offset === 0) return `Q${quarter} ${start.getFullYear()}`;
                    return `Q${quarter} ${start.getFullYear()}`;

                case 'year':
                    if (offset === 0) return `${start.getFullYear()}`;
                    return `${start.getFullYear()}`;
            }
        }

        // Update dashboard data
        function updateDashboard() {
            const period = periods[currentPeriodType];

            // Update period label
            document.getElementById('currentPeriod').textContent = formatDateRange(currentPeriodType, currentOffset);

            // Update section titles for period stats
            const periodTitles = {
                today: 'Today',
                week: 'This Week',
                month: 'This Month',
                quarter: 'This Quarter',
                year: 'This Year'
            };
            document.getElementById('financialsTitle').textContent = `Financials - ${periodTitles[currentPeriodType]}`;
            document.getElementById('marketingTitle').textContent = `Marketing - ${periodTitles[currentPeriodType]}`;

            // Update comparison labels
            document.getElementById('scriptsComparison').textContent = `${period.comparison}: 8 scripts`;
            document.getElementById('revenueComparison').textContent = `${period.comparison}: $2,850`;

            // TODO: Fetch real data from Supabase
            // For now, using dummy data
            updateStats();
        }

        // Update stats with dummy data
        function updateStats() {
            // Dummy data - this will be replaced with Supabase data
            const dummyData = {
                scripts: Math.floor(Math.random() * 20) + 5,
                revenue: Math.floor(Math.random() * 5000) + 2000,
                hoursJobs: (Math.random() * 30 + 10).toFixed(1),
                hoursAutomating: (Math.random() * 15 + 5).toFixed(1),
                hoursMisc: (Math.random() * 10 + 3).toFixed(1)
            };

            document.getElementById('scriptsValue').textContent = dummyData.scripts;
            document.getElementById('revenueValue').textContent = `$${dummyData.revenue.toLocaleString()}`;
            document.getElementById('hoursJobs').textContent = dummyData.hoursJobs;
            document.getElementById('hoursAutomating').textContent = dummyData.hoursAutomating;
            document.getElementById('hoursMisc').textContent = dummyData.hoursMisc;

            const totalHours = parseFloat(dummyData.hoursJobs) + parseFloat(dummyData.hoursAutomating) + parseFloat(dummyData.hoursMisc);
            document.getElementById('totalHours').textContent = totalHours.toFixed(1);
        }

        // Period button handlers
        document.querySelectorAll('.period-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.period-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentPeriodType = btn.dataset.period;
                currentOffset = 0;
                updateDashboard();
            });
        });

        // Navigation arrow handlers
        document.getElementById('prevPeriod').addEventListener('click', () => {
            currentOffset--;
            updateDashboard();
        });

        document.getElementById('nextPeriod').addEventListener('click', () => {
            currentOffset++;
            updateDashboard();
        });

        // Initialize dashboard
        updateDashboard();
    </script>
</body>
</html>
